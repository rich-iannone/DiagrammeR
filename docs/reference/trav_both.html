<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Traverse from one or more selected nodes onto
neighboring nodes — trav_both • DiagrammeR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">DiagrammeR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rich-iannone/DiagrammeR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Traverse from one or more selected nodes onto
neighboring nodes</h1>
    </div>

    
    <p>From a graph object of class
<code>dgr_graph</code> move from one or more nodes
present in a selection to other nodes that are
connected by edges, replacing the current nodes in
the selection with those nodes traversed to. An
optional filter by node attribute can limit the set
of nodes traversed to.</p>
    

    <pre class="usage"><span class='fu'>trav_both</span>(<span class='no'>graph</span>, <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>copy_attrs_from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>copy_attrs_as</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>agg</span> <span class='kw'>=</span> <span class='st'>"sum"</span>, <span class='kw'>add_to_selection</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>graph</th>
      <td><p>a graph object of class
<code>dgr_graph</code>.</p></td>
    </tr>
    <tr>
      <th>conditions</th>
      <td><p>an option to use filtering
conditions for the traversal.</p></td>
    </tr>
    <tr>
      <th>copy_attrs_from</th>
      <td><p>providing a node attribute
name will copy those node attribute values to the
traversed nodes. Any values extant on the nodes
traversed to will be replaced.</p></td>
    </tr>
    <tr>
      <th>copy_attrs_as</th>
      <td><p>if a node attribute name
is provided in <code>copy_attrs_from</code>, this option
will allow the copied attribute values to be
written under a different attribute name. If the
attribute name provided in <code>copy_attrs_as</code>
does not exist in the graph's ndf, the new
node attribute will be created with the chosen
name.</p></td>
    </tr>
    <tr>
      <th>agg</th>
      <td><p>if a node attribute is provided
to <code>copy_attrs_from</code>, then an aggregation
function is required since there may be cases where
multiple edge attribute values will be passed onto
the traversed node(s). To pass only a single value,
the following aggregation functions can be used:
<code>sum</code>, <code>min</code>, <code>max</code>, <code>mean</code>, or
<code>median</code>.</p></td>
    </tr>
    <tr>
      <th>add_to_selection</th>
      <td><p>an option to
either add the traversed to nodes
to the active selection of nodes
(<code>TRUE</code>) or switch the active
selection entirely to those traversed
to nodes (<code>FALSE</code>, the default case).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a graph object of class <code>dgr_graph</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Set a seed</span>
<span class='fu'>set.seed</span>(<span class='fl'>23</span>)

<span class='co'># Create a simple graph</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span>
  <span class='fu'><a href='create_graph.html'>create_graph</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_n_nodes.html'>add_n_nodes</a></span>(
    <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>2</span>,
    <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"a"</span>,
    <span class='kw'>label</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"asd"</span>, <span class='st'>"iekd"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_n_nodes.html'>add_n_nodes</a></span>(
    <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>3</span>,
    <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"b"</span>,
    <span class='kw'>label</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"idj"</span>, <span class='st'>"edl"</span>, <span class='st'>"ohd"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_edges_w_string.html'>add_edges_w_string</a></span>(
    <span class='kw'>edges</span> <span class='kw'>=</span> <span class='st'>"1-&gt;2 1-&gt;3 2-&gt;4 2-&gt;5 3-&gt;5"</span>,
    <span class='kw'>rel</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>NA</span>, <span class='st'>"A"</span>, <span class='st'>"B"</span>, <span class='st'>"C"</span>, <span class='st'>"D"</span>))

<span class='co'># Create a data frame with node ID values</span>
<span class='co'># representing the graph edges (with `from`</span>
<span class='co'># and `to` columns), and, a set of numeric values</span>
<span class='no'>df_edges</span> <span class='kw'>&lt;-</span>
  <span class='fu'>data.frame</span>(
    <span class='kw'>from</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>3</span>),
    <span class='kw'>to</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>5</span>),
    <span class='kw'>values</span> <span class='kw'>=</span> <span class='fu'>round</span>(<span class='fu'>rnorm</span>(<span class='fl'>5</span>, <span class='fl'>5</span>), <span class='fl'>2</span>))

<span class='co'># Create a data frame with node ID values</span>
<span class='co'># representing the graph nodes (with the `id`</span>
<span class='co'># columns), and, a set of numeric values</span>
<span class='no'>df_nodes</span> <span class='kw'>&lt;-</span>
  <span class='fu'>data.frame</span>(
    <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>,
    <span class='kw'>values</span> <span class='kw'>=</span> <span class='fu'>round</span>(<span class='fu'>rnorm</span>(<span class='fl'>5</span>, <span class='fl'>7</span>), <span class='fl'>2</span>))

<span class='co'># Join the data frame to the graph's internal</span>
<span class='co'># edge data frame (edf)</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span>
  <span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='join_edge_attrs.html'>join_edge_attrs</a></span>(<span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>df_edges</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='join_node_attrs.html'>join_node_attrs</a></span>(<span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>df_nodes</span>)

<span class='co'># Show the graph's internal node data frame</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_node_df.html'>get_node_df</a></span>()</div><div class='output co'>#&gt;   id type label values
#&gt; 1  1    a   asd   8.58
#&gt; 2  2    a  iekd   7.22
#&gt; 3  3    b   idj   5.95
#&gt; 4  4    b   edl   6.71
#&gt; 5  5    b   ohd   7.48</div><div class='input'>
<span class='co'># Show the graph's internal edge data frame</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_edge_df.html'>get_edge_df</a></span>()</div><div class='output co'>#&gt;   id from to  rel values
#&gt; 1  1    1  2 &lt;NA&gt;   6.00
#&gt; 2  2    1  3    A   6.11
#&gt; 3  3    2  4    B   4.72
#&gt; 4  4    2  5    C   6.02
#&gt; 5  5    3  5    D   5.05</div><div class='input'>
<span class='co'># Perform a simple traversal from node `3`</span>
<span class='co'># to adjacent nodes with no conditions on</span>
<span class='co'># the nodes traversed to</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>3</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 1 5</div><div class='input'>
<span class='co'># Traverse from node `2` to any adjacent</span>
<span class='co'># nodes, filtering to those nodes that have</span>
<span class='co'># numeric values less than `8.0` for</span>
<span class='co'># the `values` node attribute</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>values</span> <span class='kw'>&lt;</span> <span class='fl'>8.0</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 4 5</div><div class='input'>
<span class='co'># Traverse from node `5` to any adjacent</span>
<span class='co'># nodes, filtering to those nodes that</span>
<span class='co'># have a `type` attribute of `b`</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>5</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"b"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 3</div><div class='input'>
<span class='co'># Traverse from node `2` to any adjacent</span>
<span class='co'># nodes, and use multiple conditions for the</span>
<span class='co'># traversal</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>conditions</span> <span class='kw'>=</span>
      <span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"a"</span> <span class='kw'>&amp;</span>
      <span class='no'>values</span> <span class='kw'>&gt;</span> <span class='fl'>8.0</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'># Traverse from node `2` to any adjacent</span>
<span class='co'># nodes, and use multiple conditions with</span>
<span class='co'># a single-length vector</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>conditions</span> <span class='kw'>=</span>
      <span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"a"</span> <span class='kw'>|</span> <span class='no'>values</span> <span class='kw'>&gt;</span> <span class='fl'>8.0</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'># Traverse from node `2` to any adjacent</span>
<span class='co'># nodes, and use a regular expression as</span>
<span class='co'># a filtering condition</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='fu'>grepl</span>(<span class='st'>"..d"</span>, <span class='no'>label</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_selection.html'>get_selection</a></span>()</div><div class='output co'>#&gt; [1] 1 5</div><div class='input'>
<span class='co'># Create another simple graph to demonstrate</span>
<span class='co'># copying of node attribute values to traversed</span>
<span class='co'># nodes</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span>
  <span class='fu'><a href='create_graph.html'>create_graph</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_path.html'>add_path</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>5</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select_nodes_by_id.html'>select_nodes_by_id</a></span>(<span class='kw'>nodes</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2</span>, <span class='fl'>4</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='set_node_attrs_ws.html'>set_node_attrs_ws</a></span>(
    <span class='kw'>node_attr</span> <span class='kw'>=</span> <span class='no'>value</span>,
    <span class='kw'>value</span> <span class='kw'>=</span> <span class='fl'>5</span>)

<span class='co'># Show the graph's internal node data frame</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_node_df.html'>get_node_df</a></span>()</div><div class='output co'>#&gt;   id type label value
#&gt; 1  1 &lt;NA&gt;     1    NA
#&gt; 2  2 &lt;NA&gt;     2     5
#&gt; 3  3 &lt;NA&gt;     3    NA
#&gt; 4  4 &lt;NA&gt;     4     5
#&gt; 5  5 &lt;NA&gt;     5    NA</div><div class='input'>
<span class='co'># Show the graph's internal edge data frame</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_edge_df.html'>get_edge_df</a></span>()</div><div class='output co'>#&gt;   id from to  rel
#&gt; 1  1    1  2 &lt;NA&gt;
#&gt; 2  2    2  3 &lt;NA&gt;
#&gt; 3  3    3  4 &lt;NA&gt;
#&gt; 4  4    4  5 &lt;NA&gt;</div><div class='input'>
<span class='co'># Perform a traversal from the inner nodes</span>
<span class='co'># (`2` and `4`) to their adjacent nodes (`1`,</span>
<span class='co'># `3`, and `5`) while also applying the node</span>
<span class='co'># attribute `value` to target nodes; node `3`</span>
<span class='co'># will obtain a `value` of 10 since a traversal</span>
<span class='co'># to `3` will occur from `2` and `4` (and</span>
<span class='co'># multiple values passed will be summed)</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span>
  <span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>trav_both</span>(
    <span class='kw'>copy_attrs_from</span> <span class='kw'>=</span> <span class='no'>value</span>,
    <span class='kw'>agg</span> <span class='kw'>=</span> <span class='st'>"sum"</span>)

<span class='co'># Show the graph's internal node data frame</span>
<span class='co'># after this change</span>
<span class='no'>graph</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='get_node_df.html'>get_node_df</a></span>()</div><div class='output co'>#&gt;   id type label value
#&gt; 1  1 &lt;NA&gt;     1     5
#&gt; 2  2 &lt;NA&gt;     2     5
#&gt; 3  3 &lt;NA&gt;     3    10
#&gt; 4  4 &lt;NA&gt;     4     5
#&gt; 5  5 &lt;NA&gt;     5     5</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rich Iannone.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
